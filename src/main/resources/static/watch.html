<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Streaming</title>
</head>
<body>
<h1>Video Streaming Example</h1>
<video id="videoPlayer" width="960" height="720" controls>

</video>
<input type="text" id="filename" value="two.mp4" placeholder="filename"/>
<select id="qual" onchange="changed()">
    <option value="360p/">360</option>
    <option value="720p/">720</option>
    <option value="1080p/">1080</option>
</select>
<button onclick="getVideo()">See</button>
<script>
    function getVideo(){
        const vTag = document.getElementById("videoPlayer");
        const quality = document.getElementById("qual").value;
        const filename = document.getElementById("filename").value;
        if(!quality || !filename){
            alert("fill all entries");
            return;
        }
        vTag.src = "http://localhost:8080/"+quality+filename;
        vTag.type = "video/mp4";
    }
    async function changed(){
        console.log("changed");
        const vTag = document.getElementById("videoPlayer");
        const playTime = vTag.currentTime;
        await getVideo();
        vTag.addEventListener("loadedmetadata", function () {
            vTag.currentTime = playTime;
            vTag.play();
        });
    }
</script>
</body>
</html>
